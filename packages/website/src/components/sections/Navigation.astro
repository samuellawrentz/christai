---
// Enhanced Navigation with lucide-style icons
import { buttonVariants } from "@christianai/ui";

const buttonClass = buttonVariants({ variant: "default", size: "sm" });
---

<!-- SVG Icon Definitions -->
<svg class="hidden">
  <defs>
    <symbol id="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
    </symbol>
    <symbol id="close-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
    </symbol>
    <symbol id="external-link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
    </symbol>
  </defs>
</svg>

<header class="!bg-transparent backdrop-blur-md border-b border-gray-900 sticky top-0 z-50 shadow-sm transition-all duration-300 mix-blend-difference" id="navbar">
  <nav class="container mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <div>
        <a href="/" class="flex items-center group">
          <img
            src="/images/logo.svg"
            alt="ChristianAI Logo - AI-Powered Biblical Conversations"
            class="h-[180px] absolute w-auto transition-all duration-300 group-hover:scale-105 group-hover:drop-shadow-md invert"
            loading="eager"
          />
        </a>
      </div>

      <!-- Navigation Links -->
      <div class="hidden md:flex items-center space-x-8 invert">
        <a
          href="/blog/"
          class="text-slate-700 hover:text-blue-600 font-medium transition-all duration-200 relative group px-2 py-1"
        >
          Blog
          <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-600 to-purple-600 group-hover:w-full transition-all duration-300 ease-out"></span>
        </a>
        <a
          href="https://app.christianai.world"
          target="_blank"
          rel="noopener noreferrer"
          class={`${buttonClass} group bg-gradient-to-r from-blue-600 to-blue-700`}
        >
          Launch App
          <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1">
            <use href="#external-link-icon"/>
          </svg>
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden p-2 text-slate-700 hover:text-blue-600 rounded-lg hover:bg-blue-50 transition-all duration-200"
        aria-label="Toggle mobile menu"
      >
        <svg class="w-6 h-6 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" id="menu-icon">
          <use href="#menu-icon"/>
        </svg>
      </button>
    </div>

    <!-- Mobile Menu -->
    <div
      id="mobile-menu"
      class="hidden md:hidden mt-4 pt-4 border-t border-slate-200/50 overflow-hidden transition-all duration-300"
    >
      <div class="flex flex-col space-y-4 animate-fadeIn">
        <a
          href="/blog/"
          class="text-slate-700 hover:text-blue-600 font-medium transition-colors duration-200 py-2 px-2 hover:bg-blue-50 rounded-lg"
        >
          Blog
        </a>
        <a
          href="https://app.christianai.world"
          target="_blank"
          rel="noopener noreferrer"
          class={buttonClass}
        >
          Launch App
          <svg class="w-4 h-4">
            <use href="#external-link-icon"/>
          </svg>
        </a>
      </div>
    </div>
  </nav>
</header>

<script>
  // Mobile menu toggle with icon animation
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  
  if (mobileMenuButton && mobileMenu && menuIcon) {
    let isOpen = false;
    
    mobileMenuButton.addEventListener('click', () => {
      isOpen = !isOpen;
      mobileMenu.classList.toggle('hidden');
      
      // Animate menu icon
      if (isOpen) {
        menuIcon.innerHTML = '<use href="#close-icon"/>';
        menuIcon.classList.add('rotate-90');
      } else {
        menuIcon.innerHTML = '<use href="#menu-icon"/>';
        menuIcon.classList.remove('rotate-90');
      }
    });
  }

  // Add scroll-based background opacity
  const navbar = document.getElementById('navbar');
  
  if (navbar) {
    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      
      if (currentScroll > 50) {
        navbar.classList.add('bg-white/98', 'shadow-md');
        navbar.classList.remove('bg-white/95');
      } else {
        navbar.classList.add('bg-white/95');
        navbar.classList.remove('bg-white/98', 'shadow-md');
      }
    });
  }
</script>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out;
  }
</style>
